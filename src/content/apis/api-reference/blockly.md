---
title: Blockly
layout: apis.hbs
columns: two
order: 3
---

# {{title}}

## Introduction

 Blockly is a block-based, visual programming language developed by Google. Misty has a custom Blockly editor that runs in your web browser. We recommend the following browsers for running Blockly with Misty: Chrome, Safari, Firefox, and Microsoft Edge (latest versions).

 Before diving into the API, make sure to get Blockly set up by reading [Starting to Program Misty with Blockly](../../../../../onboarding/3-ways-to-interact-with-misty/blockly).

## Blockly Controls

The following controls are available on Misty's Blockly editor.

![Blockly menu](../../../assets/images/menu_blockly_1.png)

* **Enter Robot IP Address**: Misty's IP address; you can obtain this value from the Companion App.
* **Connection Status**: Indicates whether Blockly can communicate with Misty (green is success, and red is failure).
* **Status**: Current status information.
* **Run**: Run the Blockly blocks on the workspace.
* **Abort**: Stop the currently running blocks.
* **Show JavaScript Code**: Display the JavaScript code generated by Blockly.
* **Save Blockly**: Save the current blocks on the workspace as blockly.txt to ~/Downloads folder.
* **Open Blockly**: Open a saved Blockly file onto the workspace.
* **Enable Locomotion**: Enable/disable locomotion blocks on the workspace. This is useful when you are testing a sequence of blocks and want to skip the blocks that would make Misty move away or off a table.

## API

The following are descriptions of Blockly's Misty-specific blocks, along with their underlying HTTP requests and JSON payload.

**Note: After clicking Run with Blockly, there currently can be a 2-3 second delay before Misty reacts, and up to a 5-second delay between actions.**

**Important: Commands noted as "Alpha" may be partially or entirely non-functional at this time. "Beta" commands may behave unpredictably.**


### Move at speed for duration ###
Drives Misty forward or backward at a certain speed for a duration specified in milliseconds.

![Move](../../../assets/images/move.png)

Parameters
* Direction: Forward or backward.
* Speed: A value from 0 (stopped) to 10 (full speed).
* Duration: A value in milliseconds, using 100 ms increments, with a maximum value of 10 seconds.

HTTP/JSON data

~~~json
{   type: "perform_locomotion",
    payload: "{"linear":2,"angular":0,"duration":"500"}"
}
~~~


### Turn at speed for duration ###
Turns Misty left or right at a given speed for a duration specified in milliseconds.

![Turn](../../../assets/images/turn.png)

Parameters
* Direction: Left or right.
* Speed: A value from 0 (stopped) to 5 (full speed).
* Duration: A value in milliseconds, using 100 ms increments, with a maximum value of 10 seconds.

HTTP/JSON data

~~~json
{   type: "perform_locomotion",
    payload: "{"linear":0,"angular":2,"degree":45,"duration":"500"}"
}
~~~


### Pause for duration ###
Pauses Misty for a duration specified in milliseconds.

![Pause](../../../assets/images/pause.png)

Parameters
* Duration: A value in milliseconds, using 100 ms increments, with a maximum value of 10 seconds.

HTTP/JSON data

~~~json
{   type: "perform_locomotion",
    payload: "{"linear":0,"angular":0,"duration":"500"}"
}
~~~


### Move arm to position (ALPHA) ###
(Not available with Misty I.) Moves Misty's left or right arm to position up or down at a certain speed.

![Arm](../../../assets/images/arm.png)

Parameters
* Arm: Left or right.
* Position: A value ranging from 0 (fully up) to 10 (fully down).
* Speed: A value from 0 (stopped) to 10 (full speed).

HTTP/JSON data

~~~json
{   type: "perform_arm_movement",
    payload: "{"arm":"Left","position":"0","velocity":"2"}"
}
~~~


### Move head to location ###
Moves Misty's head to a given location.

![Head1](../../../assets/images/head1.png)

Parameters
* location: Left, right, up, down, or center.
* velocity: A value from 0 (stopped) to 10 (full speed).

HTTP/JSON data

~~~json
{   type: "perform_head_movement",
    payload: "{"location":"0","velocity":5}"
}
~~~


### Set head to position (ALPHA) ###
Moves Misty's head in one of three axes (tilt, turn, or up-and-down).

![Head2](../../../assets/images/head2.png)

Parameters
* Axis: Yaw (turning left or right), pitch (moving up and down) or roll (tilting Misty's head toward her shoulder).
* Position: A value from -5 to 5 specifying the amount of movement.
* Velocity: A value from 0 (stopped) to 10 (full speed).

HTTP/JSON data

~~~json
{   type: "set_head_position",
    payload: "{"axis":"Yaw","position":"0","velocity":"2"}"
}
~~~


### Change LED color ###
Changes the color of the LED behind the logo on Misty's torso.

![Led](../../../assets/images/led.png)

Parameters
* Color: A color selected from the block's options.

HTTP/JSON data

~~~json
{   type: "change_led_color",
    payload: "{"color":{"red":255,"green":0,"blue":0}}"
}
~~~


### Get string sensor readings (ALPHA) ###
Obtains sensor readings in string format.

![Sensor](../../../assets/images/sensor.png)

Parameters
* None

HTTP/JSON data

~~~json
{   type: "get_string_sensor_readings",
    payload: "{}"
}
~~~


### Start / Stop mapping ###
Starts or stops Misty's mapping of an area.

![Mapping](../../../assets/images/mapping.png)

Parameters
* None

HTTP/JSON data

~~~json
{   type: "start_mapping",
    payload: "{}"
}

{   type: "stop_mapping",
    payload: "{}"
}
~~~


### Start / Stop tracking ###
Starts or stops Misty tracking her location on a previously generated map.

![Tracking](../../../assets/images/tracking.png)

Parameters
* None

HTTP/JSON data

~~~json
{   type: "start_tracking",
    payload: "{}"
}

{   type: "stop_tracking",
    payload: "{}"
}
~~~


### Follow path ###
Drives Misty on a specified path.

![Followpath](../../../assets/images/followpath.png)

Parameters
* Path: A string of (x,y) coordinates for the path to follow. These must be obtained from a previously generated map.

HTTP/JSON data

~~~json
{   type: "follow_path",
    payload: "{"path":"(10,20),(20,20),(20,10)"}"
}
~~~


### Set affect (ALPHA) ###
Not currently recommended for use.


### Change the eye (ALPHA) ###
Changes the eye image Misty is displaying.

![Eye](../../../assets/images/eye.png)

Parameters
* Eye: A pre-defined eye image.

HTTP/JSON data

~~~json
{   type: "change_eye",
    payload: "{"Valence":0.5,"Arousal":-0.5,"Dominance":-0.5}"
}
~~~


### Hallucinate object (ALPHA) ###
Not currently recommended for use.


### Browse for file ###
Browse for a file on your computer to upload onto the robot. Normally used to select a file, prior to calling a "save audio file" block or a "save image file" block.

![Browse](../../../assets/images/browse.png)

Parameters
* File: When you click on this block, a browse file dialog is displayed to allow for file selection. Valid image file types are .jpg, .jpeg, .gif, .png. All audio file types are valid, however Misty cannot currently play OGG files. Maximum file size is 3 MB.


### List audio files###
Lists the existing audio files on Misty.

![Listaudio](../../../assets/images/listaudio.png)

Parameters
* File: An existing audio file stored on Misty.

HTTP/JSON data

~~~json
Request:
{   type: "update_audio_file_list", payload: "{}"
}

Response:
{
    Result: "brightlight.wav,hi__i_m_misty.wav"
}
~~~


### Play audio file ###
Plays an audio file that has been previously uploaded to Misty.

![Playaudio](../../../assets/images/playaudio.png)

Parameters
* File: The audio file to play. Connect this block to the "list audio files" block to play a selected audio file.

HTTP/JSON data

~~~json
{   type: "perform_play_audio",
    payload: "{"soundName":"brightlight.wav"}"
}
~~~


### Save audio file ###
Saves an audio file onto Misty. This block must **follow** the "browse for file" block, to select the audio file to be saved.

![Saveaudio](../../../assets/images/saveaudio.png)

Parameters
* File: The audio file to save to Misty from the "browse for file" block. This command accepts all audio format types, however Misty cannot currently play OGG files. The maximum file size is 3 MB.

HTTP/JSON data

~~~json
{   type: "save_audio_asset_to_robot",
    payload: "{"filenameWithoutPath":"hi.wav",
                "dataAsByteArrayString": "82,73,70,70,144,122,0,0,87,65,...",
                "widthIfImage":0,
                "heightIfImage":0,
                "immediatelyApply":false}"
}
~~~


### Save image file ###
Saves an image file to Misty. This block must **follow** the "browse for file" block, to select the image file to be saved.

![Saveimage](../../../assets/images/saveimage.png)

Parameters
* File: The image file to save to Misty from the "browse for file" block. Valid image file types are .jpg, .jpeg, .gif, .png. Maximum file size is 3 MB. Misty's screen is 480 x 272 pixels in size. Because Misty does not adjust the scaling of images, for best results use an image with proportions similar to this.

HTTP/JSON data

~~~json
{   type: "save_image_asset_to_robot",
    payload: "{"filenameWithoutPath":test.jpg,"dataAsByteArrayString":-0.5,"widthIfImage":-0.5,"heightIfImage":"","immediatelyApply":false}"
}
~~~


### Display image file ###
Sets the current image being displayed on Misty's screen.

Parameters
* Filename: The name of the file containing the image to display.

![Display image](../../../assets/images/display_image.png)


### List image files ###
Obtains a list of the images currently stored on Misty.

![List image files](../../../assets/images/list_image.png)

Parameters
* None


### Revert display image ###
Changes Misty's screen to display the previous image.

![Revert image](../../../assets/images/revert_image.png)

Parameters
* None


